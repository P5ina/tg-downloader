# TG Downloader

Telegram-бот для скачивания YouTube видео и конвертации в различные форматы.

## Возможности

- Скачивание YouTube видео (включая Shorts)
- Выбор качества видео (360p — 4K)
- Конвертация в форматы:
  - **Видео** — отправка как видеофайл
  - **Аудио** — извлечение MP3
  - **Кружочек** — видеосообщение (Premium)
  - **Войс** — голосовое сообщение (Premium)
- Premium-подписка через Telegram Stars
- Очередь задач с ограничением параллельных загрузок

## Команды бота

| Команда | Описание |
|---------|----------|
| `/start` | Начать работу с ботом |
| `/premium` | Информация о подписке и покупка |
| `/queue` | Статус очереди задач |
| `/cancel` | Отменить текущую операцию |
| `/grant` | Выдать подписку (только админ) |

## Требования

- Rust 1.75+
- FFmpeg
- yt-dlp
- SQLite

## Установка

### Локально

```bash
# Клонировать репозиторий
git clone https://github.com/P5ina/tg-downloader.git
cd tg-downloader

# Скопировать конфигурацию
cp .env.example .env

# Отредактировать .env
nano .env

# Запустить
cargo run --release
```

### Docker

```bash
# Скопировать конфигурацию
cp .env.example .env

# Отредактировать .env
nano .env

# Запустить
docker compose up -d
```

## Конфигурация

| Переменная | Описание | Обязательно |
|------------|----------|-------------|
| `TELOXIDE_TOKEN` | Токен бота от @BotFather | Да |
| `TELOXIDE_API_URL` | URL Telegram API | Да |
| `ADMIN_ID` | Telegram ID администратора | Да |
| `TELEGRAM_API_ID` | API ID (для локального Bot API) | Нет |
| `TELEGRAM_API_HASH` | API Hash (для локального Bot API) | Нет |
| `RUST_LOG` | Уровень логирования (INFO, DEBUG) | Нет |

## Использование

1. Отправьте боту ссылку на YouTube видео
2. Выберите качество видео
3. Выберите формат (видео, аудио, кружочек, войс)
4. Дождитесь загрузки и конвертации

## Premium

Подписка открывает доступ к дополнительным форматам:
- Кружочки (video notes)
- Голосовые сообщения

Стоимость: 50 Telegram Stars на 30 дней.

## Лицензия

MIT
